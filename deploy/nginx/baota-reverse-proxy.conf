# ============================================
# 宝塔面板反向代理配置示例
# 在宝塔面板「网站」→「设置」→「反向代理」中添加
# ============================================

# 方法1: 使用宝塔面板界面配置（推荐）
# 1. 进入「网站」→ 点击域名 →「设置」
# 2. 进入「反向代理」标签
# 3. 点击「添加反向代理」
# 4. 填写：
#    - 代理名称: fangdu-api
#    - 目标URL: http://127.0.0.1:3006
#    - 发送域名: $host
# 5. 点击「提交」

# 方法2: 手动编辑 Nginx 配置文件
# 在宝塔面板「网站」→「设置」→「配置文件」中添加以下内容：

location /api {
    proxy_pass http://127.0.0.1:3006;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_cache_bypass $http_upgrade;
    
    # 超时设置
    proxy_connect_timeout 60s;
    proxy_send_timeout 60s;
    proxy_read_timeout 60s;
    
    # 文件上传大小限制
    client_max_body_size 50M;
}

# 前端静态文件（如果根目录已设置为 frontend/dist，则不需要）
location / {
    root /www/wwwroot/fangdu-system/frontend/dist;
    try_files $uri $uri/ /index.html;
    index index.html;
}

# 静态资源缓存
location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
    root /www/wwwroot/fangdu-system/frontend/dist;
    expires 1y;
    add_header Cache-Control "public, immutable";
}

